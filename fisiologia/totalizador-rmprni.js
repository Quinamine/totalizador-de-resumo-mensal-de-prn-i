"use strict";const storage={salvarFicha(){for(let t=0;t<inputCels.length;t++)inputCels[t].addEventListener("input",()=>localStorage.setItem(`trmprni-cel${t}`,`${inputCels[t].value}`)),inputCels[t].value=localStorage.getItem(`trmprni-cel${t}`)},salvarDadosAdicionais(){let t=document.querySelectorAll("div.container input[type=text], input[type=date], input[type=number]#codigo-da-us, textarea#nota");t.forEach(t=>{if(t.addEventListener("input",()=>localStorage.setItem(`trmprni-${t.id}`,`${t.value}`)),t.value=localStorage.getItem(`trmprni-${t.id}`),t.matches("#nota")){let e=()=>""!==t.value?t.classList.add("bold"):t.classList.remove("bold");t.addEventListener("input",()=>e()),e()}})}},totalizacao={filtrarCelulas(t){if(t.dataset.subtotaleixoy&&t.dataset.totaleixoy){t.classList.add(`${t.dataset.subtotaleixoy}`),t.classList.add(`${t.dataset.totaleixoy}`);let e=document.querySelectorAll(`.${t.dataset.subtotaleixoy}`),a=document.querySelector(`.${t.dataset.subtotaleixoyoutput}`),l=document.querySelectorAll(`.${t.dataset.totaleixoy}`),o=document.querySelector(`.${t.dataset.totaleixoyoutput}`);this.totalizarCelulas(e,a),this.totalizarCelulas(l,o)}if(t.dataset.totaleixox){t.classList.add(`${t.dataset.totaleixox}`);let s=document.querySelectorAll(`.${t.dataset.totaleixox}`),r=document.querySelector(`.${t.dataset.totaleixoxoutput}`);this.totalizarCelulas(s,r)}if(t.dataset.subtotaleixox){t.classList.add(`${t.dataset.subtotaleixox}`);let u=document.querySelectorAll(`.${t.dataset.subtotaleixox}`),i=document.querySelector(`.${t.dataset.subtotaleixoxoutput}`);this.totalizarCelulas(u,i)}if(t.dataset.totalgeral){t.classList.add(`${t.dataset.totalgeral}`);let d=document.querySelectorAll(`.${t.dataset.totalgeral}`),c=document.querySelector(`.${t.dataset.totalgeraloutput}`);this.totalizarCelulas(d,c)}if(t.dataset.totalquetransitam){let n=t.dataset.totalquetransitam.split("-mais-"),y=document.querySelector(`.${n[0]}`),p=document.querySelector(`.${n[1]}`),q=document.querySelector(`.${n[2]}`),v=document.querySelector(`.${t.dataset.totalquetransitamoutput}`);v.value=Number(y.value)+Number(p.value)-q.value}if(t.dataset.subtotalquetransitam){let x=t.dataset.subtotalquetransitam.split("-mais-"),S=document.querySelector(`.${x[0]}`),m=document.querySelector(`.${x[1]}`),f=document.querySelector(`.${x[2]}`),b=document.querySelector(`.${t.dataset.subtotalquetransitamoutput}`);b.value=Number(S.value)+Number(m.value)-f.value}if(t.dataset.totalgeralquetransitam){let g=t.dataset.totalgeralquetransitam.split("-mais-"),L=document.querySelector(`.${g[0]}`),h=document.querySelector(`.${g[1]}`),C=document.querySelector(`.${g[2]}`),z=document.querySelector(`.${t.dataset.totalgeralquetransitamoutput}`);z.value=Number(L.value)+Number(h.value)-C.value}if(t.dataset.calcproporcaodesaida){let A=document.querySelectorAll("[data-calcproporcaodesaida]");for(let E of A){let $=E.dataset.calcproporcaodesaida.split("-divisao-"),_=document.querySelector(`.${$[0]}`),I=document.querySelector(`.${$[1]}`),F=document.querySelector(`.${E.dataset.calcproporcaodesaidaoutput}`),D=_.value/I.value*100;D%1!=0&&(D=D.toFixed(2)),F.textContent=`${D}%`}}},totalizarCelulas(t,e){let a=0;for(let l of t)a+=Number(l.value);e.value=a}};function escutarEventos(){inputCels.forEach(t=>{t.addEventListener("input",()=>totalizacao.filtrarCelulas(t)),""!=t.value&&totalizacao.filtrarCelulas(t)})}window.addEventListener("load",()=>{"undefined"!=typeof Storage&&(storage.salvarFicha(),storage.salvarDadosAdicionais()),escutarEventos()});